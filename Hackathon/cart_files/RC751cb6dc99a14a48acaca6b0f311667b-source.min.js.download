// For license information, see `https://assets.adobedtm.com/2bf21cf7b5d8/d43a05c8c4c2/1968c3ceb7cc/RC751cb6dc99a14a48acaca6b0f311667b-source.js`.
_satellite.__registerScript('https://assets.adobedtm.com/2bf21cf7b5d8/d43a05c8c4c2/1968c3ceb7cc/RC751cb6dc99a14a48acaca6b0f311667b-source.min.js', "var getEnhancements=function(e){var a=[],t=e.filter(function(e){return\"json\"===e.type}),n=e.filter(function(e){return\"html\"===e.type});return 0<t.length&&t.forEach(function(e){a.push(e.content)}),0<n.length&&n.forEach(function(e,t){try{a.push(JSON.parse(e.content))}catch(n){_satellite.logger.warn(\"=== Target: GETOFFER FAILURE: The reco at index: \"+t+\" failed to parse to JSON and  will not be in enhancements event ===\")}}),0<a.length?a:null};!function(){var i=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,t){if(!/bestbuycanada\\.tt\\.omtrdc\\.net/.test(t))return i.apply(this,[e,t]);var n=\"e872a74cc53145aea95c5f240cadc1e5\",a=t;if(/mboxSession=\\&/i.test(t)){var o=\"mboxSession=\"+(_satellite.cookie.get(\"dtm_mSession\")||n)+\"&\";a=t.replace(/mboxSession=\\&/gi,o)}else{var r=_satellite.cookie.get(\"mbox\").split(\"|\").filter(function(e){return/session/gi.test(e)}).join()||\"\";r=r.split(\"#\")[1]||n,_satellite.cookie.set(\"dtm_mSession\",r,{expires:7})}return i.apply(this,[e,a])}}(),window.mboxFetch=function(e,t,n){try{var a=_satellite.cookie.get(\"mbox\")||\"\",o=_satellite.cookie.get(\"AMCV_D6E638125859683E0A495D2D@AdobeOrg\")||\"\",r=Object.assign({},t);r.at_property=\"fc53a67f-eeaf-6c6d-9c82-64ad36aae2bd\",window.persistentMetaData=window.persistentMetaData||{},window.persistentMetaData.mboxCookie=a+\",\"+o,window.persistentMetaData.mboxLoadTime=window.persistentMetaData.mboxLoadTime||{},_satellite.logger.log(\"=== Target: Fetching mbox \"+e+\" ===\"),adobe.target.getOffers({request:{execute:{pageLoad:{parameters:t}},property:{token:r.at_property}}}).then(function(e){n&&e&&e.execute&&e.execute.pageLoad.options&&document.dispatchEvent(window.enhancementsLoadedEvent=new CustomEvent(\"enhancements-loaded\",{detail:{enhancements:getEnhancements(e.execute.pageLoad.options)}}))})}catch(i){_satellite.logger.error(\"=== Target: failed to load ===\"),_satellite.logger.error(i)}};var errorTrackingHandler=function(e){_satellite.logger.error(\"Adobe Target Error Type:\"+e.detail.type+\" Message:\"+e.detail.message)};document.addEventListener(adobe.target.event.CONTENT_RENDERING_FAILED,errorTrackingHandler),document.addEventListener(adobe.target.event.REQUEST_FAILED,errorTrackingHandler);");